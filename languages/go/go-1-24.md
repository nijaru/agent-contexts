# Go 1.24 Release Notes Summary

Released February 2025, Go 1.24 introduces updates that impact how code is written, including new standard library functions, behavior changes, and tool enhancements. This summary focuses on changes relevant to an LLM coding tool, ensuring it can generate accurate, up-to-date Go code. Below are the key updates, complete with function signatures and concise explanations.

## Language Changes

- **Generic Type Aliases**: Fully supported (previously a preview in Go 1.23).
  ```go
  type Alias[T any] = struct{ Field T }
  var x Alias[int] // Example usage
  ```
  - **Impact**: Simplifies type definitions; no need for `GOEXPERIMENT=aliastypeparams`.

## Standard Library Updates

### strings Package

- **New Iterator Functions**: Go 1.24 adds iterator-based functions to the `strings` package, leveraging the `iter.Seq` type for functional string processing. These are critical for modern Go code involving string iteration.
  ```go
  func Lines(s string) iter.Seq[string]           // Iterates over newline-terminated lines in s
  func SplitSeq(s, sep string) iter.Seq[string]   // Iterates over substrings split around sep
  func SplitAfterSeq(s, sep string) iter.Seq[string] // Iterates over substrings split after sep
  func FieldsSeq(s string) iter.Seq[string]       // Iterates over fields split by whitespace
  func FieldsFuncSeq(s string, f func(rune) bool) iter.Seq[string] // Iterates over fields split by custom function f
  ```
  - **Example**:
    ```go
    import "strings"
    for line := range strings.Lines("a\nb\nc") {
        fmt.Println(line) // Outputs: "a", "b", "c"
    }
    ```
  - **Impact**: Enables efficient, iterator-based string handling; LLMs should prioritize these over older methods like `strings.Split` where iteration is sufficient.

### bytes Package

- **New Iterator Functions**: Similar to `strings`, the `bytes` package adds iterator-based functions for byte slices.
  ```go
  func Lines(b []byte) iter.Seq[[]byte]           // Iterates over newline-terminated lines in b
  func SplitSeq(b, sep []byte) iter.Seq[[]byte]   // Iterates over subslices split around sep
  func SplitAfterSeq(b, sep []byte) iter.Seq[[]byte] // Iterates over subslices split after sep
  func FieldsSeq(b []byte) iter.Seq[[]byte]       // Iterates over fields split by whitespace
  func FieldsFuncSeq(b []byte, f func(rune) bool) iter.Seq[[]byte] // Iterates over fields split by custom function f
  ```
  - **Impact**: Mirrors `strings` updates for byte slices; use these for modern byte processing.

### maps Package

- **New Function**:
  ```go
  func Clear[K comparable, V any](m map[K]V) // Removes all entries from m
  ```
  - **Example**:
    ```go
    m := map[string]int{"a": 1, "b": 2}
    maps.Clear(m) // m is now empty
    ```
  - **Impact**: Simplifies map clearing; no need for manual iteration or reassignment.

### slices Package

- **New Function**:
  ```go
  func Concat[S ~[]E, E any](slices ...S) S // Concatenates multiple slices into one
  ```
  - **Example**:
    ```go
    s1 := []int{1, 2}
    s2 := []int{3, 4}
    result := slices.Concat(s1, s2) // result is []int{1, 2, 3, 4}
    ```
  - **Impact**: Streamlines slice concatenation; prefer over manual append loops.

### os Package

- **New Type**: `os.Root` restricts file operations to a specified directory, enhancing security.
  ```go
  func NewRoot(path string) (*Root, error)       // Creates a new Root
  func (r *Root) Open(name string) (*File, error) // Opens file relative to root
  ```
  - **Example**:
    ```go
    r, err := os.NewRoot("/safe/dir")
    if err == nil {
        f, _ := r.Open("file.txt") // Opens /safe/dir/file.txt
    }
    ```
  - **Impact**: Use for secure file access; expect new error types (e.g., permission-related) to handle.

### runtime Package

- **New Function**: Replaces `SetFinalizer` for safer resource cleanup.
  ```go
  func AddCleanup(obj any, f any) // Registers cleanup function for obj
  ```
  - **Example**:
    ```go
    obj := new(int)
    runtime.AddCleanup(obj, func() { fmt.Println("Cleaned up") })
    ```
  - **Impact**: Improves resource management reliability.

- **Deprecation**: `runtime.GOROOT()` is deprecated.
  - **Change**: Use `go env GOROOT` instead.
    ```go
    // Old: runtime.GOROOT()
    // New: exec.Command("go", "env", "GOROOT").Output()
    ```
  - **Impact**: Update code to avoid deprecated function.

### subtle Package

- **New Function**: Ensures data-independent timing for security-sensitive operations (ARM64 DIT support).
  ```go
  func WithDataIndependentTiming(f func()) // Runs f with constant-time guarantees
  ```
  - **Example**:
    ```go
    subtle.WithDataIndependentTiming(func() {
        // Timing-sensitive operation
    })
    ```
  - **Impact**: Essential for cryptographic code; use to prevent timing attacks.

### time Package

- **New Method**: Resets a timer to its remaining duration.
  ```go
  func (t *Timer) ResetRemaining() bool // Resets t to remaining time
  ```
  - **Example**:
    ```go
    t := time.NewTimer(5 * time.Second)
    time.Sleep(2 * time.Second)
    t.ResetRemaining() // Resets to ~3 seconds
    ```
  - **Impact**: Simplifies timer reuse; adjust logic accordingly.

### encoding Package

- **New Interfaces**: For custom encoding implementations.
  ```go
  type TextAppender interface { AppendText([]byte) []byte }
  type BinaryAppender interface { AppendBinary([]byte) []byte }
  ```
  - **Impact**: Implement these for custom types needing text or binary encoding (e.g., `time.Time` now supports them).

### crypto/sha3 Package

- **New Package**: Implements SHA-3 hash functions and SHAKE/cSHAKE extendable-output functions.
  - **Impact**: Use for modern cryptographic hashing; see package docs for specific functions.

### testing/synctest Package

- **New Experimental Package**: Aids testing of concurrent code.
  - **Impact**: Useful for concurrent system tests; enable with `GOEXPERIMENT=synctest`.

### crypto/rsa Package

- **Behavior Change**: Key-related functions now enforce minimum 1024-bit keys.
  - Affected functions: `GenerateKey`, `Sign`, `Verify`, `Encrypt`, `Decrypt`.
  - **Impact**: Handle new errors for keys < 1024 bits; use `GODEBUG=rsa1024min=0` to bypass (not recommended).

## Tools

### go Command

- **Tool Directives**: Manage tool dependencies in `go.mod`.
  ```go
  tool github.com/example/tool@v1.2.3
  ```
  - **New Flag**: `go get -tool` adds tool directives.
    ```bash
    go get -tool github.com/example/tool@v1.2.3
    ```
  - **Impact**: Ensures reproducible tool versions; update `go.mod` accordingly.

### go telemetry

- **Enabled by Default**: Collects usage stats unless disabled.
  ```bash
  go telemetry off  # Opt out
  ```
  - **Impact**: No code change required, but inform users of privacy option.

## Runtime and Performance

- **Memory Management**: Faster memory return to OS after heap shrinkage.
  - **Impact**: Reduces footprint; no code changes needed.
- **Execution Tracer**: Improved CPU profile accuracy.
  - **Impact**: Better debugging; no code impact.

## Platform Changes

- **Minimum Linux Kernel**: 3.2 required.
  - **Impact**: Ensure compatibility for Linux deployments.
- **Windows/ARM**: 32-bit port is broken.
  - **Impact**: Avoid targeting 32-bit Windows/ARM.
